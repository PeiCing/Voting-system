<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="style_HomePage.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!-- å¼•å…¥ jQuery -->
    <script src="HomeScript.js" defer></script> <!-- å¼•å…¥ JavaScript æ–‡ä»¶ -->
</head>
<script>
    $(document).ready(function(){
        $.ajax({
            url: 'UserNum.php', // æŒ‡å®šå¾Œç«¯è™•ç†æ–‡ä»¶çš„è·¯å¾‘
            type: 'GET',
            success: function(data) {
                $('#UserNum').text(data); // å°‡å¾å¾Œç«¯ç²å–çš„ä½¿ç”¨è€…æ•¸é‡æ›´æ–°åˆ° HTML ä¸­
            },
            error: function() {
                alert('Error fetching user count.');
            }
        });
        $.ajax({
            url: 'PollNum.php', // æŒ‡å®šå¾Œç«¯è™•ç†æ–‡ä»¶çš„è·¯å¾‘
            type: 'GET',
            success: function(data) {
                $('#PollNum').text(data); // å°‡å¾å¾Œç«¯ç²å–çš„ä½¿ç”¨è€…æ•¸é‡æ›´æ–°åˆ° HTML ä¸­
            },
            error: function() {
                alert('Error fetching user count.');
            }
        });
    });
    document.addEventListener('DOMContentLoaded', function() {
        const togglePassword1 = document.getElementById('togglePassword1');
        const togglePassword2 = document.getElementById('togglePassword2');
        const passwordField = document.getElementById('Password');
        const confirmPasswordField = document.getElementById('confirmPassword');

        togglePassword1.addEventListener('click', function() {
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);
            // åˆ‡æ›åœ–ç¤º
            this.src = type === 'password' ? 'pic/eye_closed_icon.png' : 'pic/eye_open_icon.png';
        });

        togglePassword2.addEventListener('click', function() {
            const type = confirmPasswordField.getAttribute('type') === 'password' ? 'text' : 'password';
            confirmPasswordField.setAttribute('type', type);
            // åˆ‡æ›åœ–ç¤º
            this.src = type === 'password' ? 'pic/eye_closed_icon.png' : 'pic/eye_open_icon.png';
        });
    });
</script>
<body>      
    <main>
        <!-- æœ€ä¸Šæ–¹æ·ºè—æ°´å¹³æ¢ -->
        <div class="container-wrapper">
            <a href="HomePage.html"><p>&ensp;&ensp;&ensp;&ensp;&ensp;Voting System</p></a>
            <img src="pic/List.png" style="height: 20px;position: absolute; left:350px;">        
        </div>
        <!-- æœ€ä¸Šæ–¹æ·ºè—æ°´å¹³æ¢å°¾éƒ¨ä¹‹ä½¿ç”¨è€…å€å¡Š -->
        <div id="ShowUser" class="container-wrapper-user">
            <!-- ä½¿ç”¨è€…ç›¸ç‰‡èˆ‡å§“åï¼Œé»æ“Šè·³å‡ºå°è¦–çª— -->
            <button onclick="ShowUserData()">
                <img src="pic/username_icon.png" id="userPhoto1" alt="User Photo">               
                <p id="usernameDisplay1" style="font-size: 15px;color: #fff;"></p>
                <div id="Block1" style="display: none;">
                    <img src="pic/username_icon.png"  id="userPhoto2" alt="User Photo" style="height: 80px;width: 80px;">
                    <p id="usernameDisplay2" style="font-size: 15px;color: #fff;"></p>
                </div>
            </button>
        </div>
        <div id="Block2" style="display: none;" >
            <button  id="Update" onclick="openModal()" style="position: absolute;left: 25px;top:15px;font-size: 15px;">
                Update
            </button>
            <button id="SignOut" onclick="SignOut()" style="position: absolute;right: 25px;top:15px;font-size: 15px;">
                SignOut
            </button>
        </div>
        <!-- Update è¦–çª— -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <!-- X  æŒ‰é’® -->
                <span class="close" onclick="closeModal()">&times;</span>
                <!-- Close æŒ‰é’® -->
                <button class="close" id="CloseBTN" onclick="closeModal()"> X Close</button>
                <!-- Save æŒ‰é’® -->
                <button class="close" id="SaveBTN" onclick="saveChanges(event)"> V Save </button>

                <!-- æ¨™é¡Œ -->
                <p  style="font-size: 25px;"><b>&ensp; Users Profile</b></p>

                <div style="border: 1px solid #ccc;"></div> <!-- æ°´å¹³æ©«ç·š -->
                <!-- è¼¸å…¥ä½¿ç”¨è€…åç¨±æ¬„ä½ -->
                <div class="input-container">
                    <p><b>&ensp;&ensp; Usernames:</b></p>
                    <input type="text" placeholder="NewUsername" class="input-field"> 
                </div>
                <!-- è¼¸å…¥å¯†ç¢¼æ¬„ä½ -->
                <div class="input-container">
                    <p><b>&ensp;&ensp; Password:</b></p>
                    <input type="password" placeholder="NewPassword" id="Password" class="input-field">
                    <img src="pic/eye_closed_icon.png"  style="margin-right: 10%;height: 25px;" alt="Eye Icon" id="togglePassword1"> <!-- æ’å…¥çœ¼ç›åœ–ç¤º -->       
                </div>
                <!-- ä¸Šå‚³æª”æ¡ˆæ¬„ä½ -->
                <form id="profileForm" enctype="multipart/form-data">
                    <div class="input-container">
                        <p><b>&ensp;&ensp; Photos:</b></p>
                        <input type="file" placeholder="NewPhoto" id="fileInput" class="input-field"> 
                    </div>
                </form>

                <div style="border: 1px solid #ccc;"></div> <!-- æ°´å¹³æ©«ç·š -->
                <!-- è¼¸å…¥ç›®å‰å¯†ç¢¼ç¢ºèªä¿®æ”¹ -->
                <div class="input-container">
                    <p><b>&ensp;&ensp; Current Password:</b></p>
                    <input type="password" placeholder="CurrentPassword" id="confirmPassword" class="input-field"> 
                    <img src="pic/eye_closed_icon.png"  style="margin-right: 10%;height: 25px;" alt="Eye Icon" id="togglePassword2"> <!-- æ’å…¥çœ¼ç›åœ–ç¤º -->       
                </div>

                <div style="border: 1px solid #ccc;"></div> <!-- æ°´å¹³æ©«ç·š -->
                
                <!-- éŒ¯èª¤æç¤º -->
                <div id="error-container" class="error-message" style="margin-top: 100px;display: none;"><br></div>
            </div>
        </div> 
        <!-- -------------------------------------------------------------------------------  -->
        <div class="container">
            <!-- æœ€å·¦å´å€å¡Š -->
            <div class="user-info">
                <!-- ä½¿ç”¨è€…ç›¸ç‰‡ -->
                <img id="userPhoto3" src="pic/username_icon.png"  alt="User Photo" class="user_img" >
                <!-- ä½¿ç”¨è€…åç¨±+åœ¨ç·šæç¤º -->
                <p id="usernameDisplay3"><br></p><p id="OnOutLine" style="font-size: 15px;top:50px;">ğŸŸ¢ Online </p>
            </div>
            <div class="List-Title">
                <!-- åˆ—è¡¨Title -->
                <p>&ensp;<b>MANAGE</b></p>
            </div>
            <div class="List_Option">
                <!-- é¸é …1:Home -->
                <div>
                    <button id="ListBTN" onclick="redirectToHomePage('HomePage')">
                        <img src="pic/line.png" style="position: absolute; right:290px;height: 50px; " alt="">
                        <img src="pic/home.png" style="position: absolute;height: 30px;right:240px;" alt="HomePage"> <!-- åœ–ç‰‡ -->
                        <b>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Home</b>
                    </button>
                </div>
                <!-- é¸é …2:Poll page -->
                <div style="position: absolute; top: 50px;">
                    <button id="ListBTN" onclick="redirectToHomePage('PollPage')">
                        <img src="pic/poll.png" style="position: absolute;height: 30px;right:240px;" alt="PollPage"> <!-- åœ–ç‰‡ -->
                        <b>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Poll page</b>
                    </button>
                </div>
            
                <!-- æŠ•ç¥¨æ¡†é¡¯ç¤ºå€å¡Š -->
                <div class="modal-container">
                        
                </div>  
            </div>
        </div>
        <!-- -------------------------------------------------------------------------------  -->
        <!-- æŠ•ç¥¨æ´»å‹•çµ±è¨ˆé¡¯ç¤ºå€å¡Š -->
        
        <div class="PollNum">
            <h2 style="position: absolute;top:-65px;font-family: Arial">Polls</h2>
            <h1 id="PollNum"style="right:540px;">Loading...</h1> <!-- åˆå§‹é¡¯ç¤ºç‚º "Loading..."ï¼Œå¾ŒçºŒå°‡è¢« AJAX æ›´æ–° -->
            <p>&ensp;&ensp;No,of Polls</p>
            <img src="pic/PollNum.png" style="position: absolute;width:70px;right:30px;">     
        </div>
        <div class="PollMoreInfo">
            <button>
                <p style="font-family: Arial;margin: 50px auto;">More Info&ensp;<img src="pic/MoreInfo.png" style="width:15px;position: relative;top:2px;"></p>
            </button>
        </div>
        <div class="UserNum">
            <h1 id="UserNum" style="right:550px;">Loading...</h1> <!-- åˆå§‹é¡¯ç¤ºç‚º "Loading..."ï¼Œå¾ŒçºŒå°‡è¢« AJAX æ›´æ–° -->
            <p>&ensp;&ensp;No,of Users</p>
            <img src="pic/UserNum.png" style="position: absolute;width:70px;right:30px;">          
        </div>   
        <div class="UserMoreInfo">
            <button>
                <p style="font-family: Arial;margin: 50px auto;">More Info&ensp;<img src="pic/MoreInfo.png" style="width:15px;position: relative;top:2px;"></p>
            </button>
        </div>

        
        
    </main>
</body>
</html>
